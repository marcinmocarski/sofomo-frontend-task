(this["webpackJsonpsofomo-frontend-task"]=this["webpackJsonpsofomo-frontend-task"]||[]).push([[0],{75:function(e,t,n){},92:function(e,t,n){},93:function(e,t,n){"use strict";n.r(t);var c=n(2),a=n(0),r=n.n(a),o=n(9),i=n.n(o),s=n(15),l=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,137)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,r=t.getLCP,o=t.getTTFB;n(e),c(e),a(e),r(e),o(e)}))},d=(n(74),n(59)),u="https://freegeoip.app/json",j=n(133),h=n(134),f=(n(75),n(46)),p=Object(f.GoogleApiWrapper)({apiKey:"AIzaSyDHgyLLwUzQBZvZDZ4R_R6wsATJEmGBlqo"})((function(e){var t=e.cords;return Object(c.jsx)(c.Fragment,{children:Object(c.jsx)(f.Map,{google:e.google,initialCenter:{lat:t.latitude,lng:t.longitude},center:{lat:t.latitude,lng:t.longitude},zoom:13,style:{width:"100%",height:"100$"}})})})),b=n(125),O=n(135),x=n(94),v=n(124),g=n(57),m=n.n(g),y=n(122),L=Object(y.a)((function(e){return{root:{display:"flex"},paper:{display:"flex",flex:1,marginRight:e.spacing(3)},input:{marginLeft:e.spacing(1),flex:1},button:{flex:.1}}})),I=function(e){var t=e.searchHandler,n=void 0===t?function(){}:t,r=Object(a.useRef)(null),o=L(),i=function(){var e=r.current.value;n(e)};return Object(c.jsxs)("div",{className:o.root,children:[Object(c.jsxs)(x.a,{className:o.paper,children:[Object(c.jsx)(O.a,{inputRef:r,className:o.input,placeholder:"Enter valid IP address or url..."}),Object(c.jsx)(v.a,{onClick:i,children:Object(c.jsx)(m.a,{})})]}),Object(c.jsx)(b.a,{className:o.button,variant:"contained",onClick:i,children:"Search"})]})},N=n(126),C=n(130),w=n(127),S=n(128),k=n(129),B=n(58),F=n.n(B),R=n(40),z=Object(y.a)((function(e){return{root:{backgroundColor:e.palette.background.paper,height:"100%"},header:{padding:e.spacing(1),paddingBottom:0},listItemText:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}}})),E=function(){var e=z(),t=Object(s.b)(),n=Object(s.c)((function(e){return e.searchList})),a=n.map((function(n,a){return Object(c.jsxs)("div",{children:[Object(c.jsx)(N.a,{}),Object(c.jsxs)(w.a,{button:!0,onClick:function(){t({type:"currentLocationInfo/set",payload:n})},children:[Object(c.jsx)(S.a,{children:Object(c.jsx)(F.a,{})}),Object(c.jsx)(k.a,{className:e.listItemText,primary:n.ip})]})]},a)}));return Object(c.jsxs)("div",{className:e.root,children:[Object(c.jsx)(R.a,{className:e.header,variant:"h5",component:"h2",color:"textSecondary",children:"Recent searches"}),Object(c.jsx)(C.a,{component:"nav",children:a})]})},H=n(131),P=n(132),T=Object(y.a)({root:{height:"100%"},card:{height:"100%"},title:{fontSize:14}}),A=function(e){var t=e.info,n=e.title,a=t.ip,r=t.city,o=t.country_name,i=T();return Object(c.jsx)("div",{className:i.root,children:Object(c.jsx)(H.a,{className:i.card,children:Object(c.jsxs)(P.a,{children:[Object(c.jsx)(R.a,{className:i.title,color:"textSecondary",gutterBottom:!0,children:n}),Object(c.jsx)(R.a,{variant:"h5",component:"p",children:a}),Object(c.jsx)(R.a,{variant:"h5",component:"p",children:r}),Object(c.jsx)(R.a,{variant:"h5",component:"p",children:o})]})})})},M=function(e){var t=e.latitude,n=e.longitude;return void 0!==t&&void 0!==n?{latitude:t,longitude:n}:{latitude:0,longitude:0}},D=function(e){var t=e.searchHandler,n=(Object(s.c)((function(e){return e.searchList})),Object(s.c)((function(e){return e.userLocationInfo}))||{}),a=Object(s.c)((function(e){return e.currentLocationInfo}))||{},r=M(n),o=M(a);return Object(c.jsxs)("div",{className:"App",children:[Object(c.jsx)("div",{className:"allSearchesListContainer",children:Object(c.jsx)(E,{})}),Object(c.jsx)("div",{className:"userLocationMapContainer",children:Object(c.jsx)(p,{cords:r})}),Object(c.jsx)("div",{className:"userLocationInfoContainer",children:Object(c.jsx)(A,{info:n,title:"Your location"})}),Object(c.jsx)("div",{className:"searchBoxContainer",children:Object(c.jsx)(I,{searchHandler:t})}),Object(c.jsx)("div",{className:"lastSearchLocationMapContainer",children:Object(c.jsx)(p,{cords:o})}),Object(c.jsx)("div",{className:"lastSearchInfoContainer",children:Object(c.jsx)(A,{info:a,title:"Searched location"})})]})},J=function(){var e=Object(a.useState)(!1),t=Object(d.a)(e,2),n=t[0],r=t[1],o=Object(s.b)();Object(a.useEffect)((function(){i()}),[]);var i=function(){fetch("https://api.ipify.org/?format=json").then((function(e){return e.json()})).then((function(e){e.ip?l(e.ip,!0):r(!0)}))},l=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];fetch("".concat(u,"/").concat(e)).then((function(e){return e.json()})).then((function(e){e&&e.latitude&&e.longitude?t?o({type:"userLocationInfo/set",payload:e}):(o({type:"searchList/added",payload:e}),o({type:"currentLocationInfo/set",payload:e})):r(!0)})).catch((function(e){r(!0)}))};return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(D,{searchHandler:l}),Object(c.jsx)(j.a,{open:n,anchorOrigin:{vertical:"top",horizontal:"center"},children:Object(c.jsx)(h.a,{variant:"filled",severity:"error",onClose:function(){return r(!1)},children:"Error while fetching location. Please make sure you provide valid IP address or url."})})]})},Z=n(21),G=n(60),_=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"searchList/added":return[].concat(Object(G.a)(e),[t.payload]);default:return e}},q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"userLocationInfo/set":return t.payload;default:return e}},K=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"currentLocationInfo/set":return t.payload;default:return e}},Q=Object(Z.b)({searchList:_,userLocationInfo:q,currentLocationInfo:K}),U=Object(Z.c)(Q);n(92);i.a.render(Object(c.jsx)(r.a.StrictMode,{children:Object(c.jsx)(s.a,{store:U,children:Object(c.jsx)(J,{})})}),document.getElementById("root")),l()}},[[93,1,2]]]);
//# sourceMappingURL=main.753fd0d4.chunk.js.map